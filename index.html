<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Videojuego Retro</title>
    <!-- Carga de Tailwind CSS para estilos base y responsividad -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Carga de la fuente 'Press Start 2P' para un estilo retro pixelado -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <!-- Carga de Tone.js para generar sonidos -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>
    <style>
        /* Estilos generales para el cuerpo de la página */
        body {
            font-family: 'Press Start 2P', cursive; /* Fuente pixelada para todo el texto */
            background-color: #1a202c; /* Fondo oscuro, típico de juegos retro */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* Asegura que ocupe toda la altura de la ventana */
            margin: 0;
            overflow: hidden; /* Evita barras de desplazamiento debido a animaciones */
            color: #fef08a; /* Color amarillo brillante para el texto principal */
            text-shadow: 2px 2px #000; /* Sombra para el efecto pixelado */
        }

        /* Contenedor principal de la interfaz del juego */
        .game-container {
            background-color: #2d3748; /* Un gris oscuro para el contenedor */
            border: 4px solid #4a5568; /* Borde grueso para simular un marco de pantalla */
            border-radius: 12px; /* Esquinas redondeadas */
            text-align: center;
            position: relative; /* Necesario para posicionar el cursor */
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.5); /* Resplandor verde neón */

            /* Nuevos estilos para la relación de aspecto 9:16 y responsividad */
            /* Utiliza min() para asegurar que el contenedor se ajuste tanto al ancho como al alto de la pantalla */
            width: min(90vw, calc(90vh * 9 / 16));
            height: min(calc(90vw * 16 / 9), 90vh);

            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 5%; /* Padding responsivo basado en el tamaño del contenedor */

            /* Estado inicial para la animación de entrada (oculto en la parte inferior) */
            transform: translateY(100vh);
            opacity: 0;
        }

        /* Clase para la animación de entrada (se añade con JavaScript) */
        .game-container.animate-in {
            transform: translateY(0); /* Sube a su posición final */
            opacity: 1; /* Se vuelve visible */
            transition: transform 1s ease-out, opacity 1s ease-out; /* Transición suave */
        }

        /* Estilo para el texto de la pregunta */
        .question-text {
            /* clamp() permite un tamaño de fuente que escala entre un mínimo, un valor preferido (basado en vw) y un máximo */
            font-size: clamp(1rem, 4vw, 2.5rem);
            margin-bottom: 5%; /* Margen responsivo */
            animation: retroFloat 2s infinite ease-in-out; /* Animación de flotación */
        }

        /* Contenedor de los botones "SÍ" y "NO" */
        .options-container {
            display: flex;
            justify-content: center;
            /* clamp() para un espacio responsivo entre los botones */
            gap: clamp(20px, 10vw, 60px);
            position: relative; /* Para el posicionamiento del cursor */
        }

        /* Estilo base para los botones */
        .option-button {
            background-color: transparent; /* Fondo transparente */
            border: 2px solid #fef08a; /* Borde amarillo brillante */
            color: #fef08a; /* Color de texto amarillo */
            padding: 3% 6%; /* Padding responsivo */
            /* clamp() para un tamaño de fuente responsivo */
            font-size: clamp(0.8rem, 3.5vw, 2rem);
            cursor: pointer;
            transition: all 0.2s ease-in-out; /* Transición suave para efectos hover */
            border-radius: 8px; /* Esquinas redondeadas */
            animation: retroFloat 2s infinite ease-in-out; /* Animación de flotación */
            position: relative; /* Para el efecto de sombra y cursor */
        }

        /* Efecto hover para los botones */
        .option-button:hover {
            background-color: #fef08a; /* Fondo amarillo al pasar el ratón */
            color: #1a202c; /* Texto oscuro al pasar el ratón */
            box-shadow: 0 0 15px #fef08a; /* Resplandor amarillo */
        }

        /* Animación de flotación retro para texto y botones */
        @keyframes retroFloat {
            0% { transform: translateY(0px); text-shadow: 2px 2px #000, 0 0 5px rgba(255, 255, 255, 0.3); }
            50% { transform: translateY(-8px); text-shadow: 2px 2px #000, 0 0 10px rgba(255, 255, 255, 0.6); }
            100% { transform: translateY(0px); text-shadow: 2px 2px #000, 0 0 5px rgba(255, 255, 255, 0.3); }
        }

        /* Estilo para el cursor pixelado (SVG incrustado para mayor control) */
        .pixel-cursor {
            position: absolute;
            /* clamp() para un tamaño de cursor responsivo */
            width: clamp(30px, 8vw, 50px);
            height: clamp(30px, 8vw, 50px);
            fill: limegreen; /* Color de relleno del cursor */
            filter: drop-shadow(0 0 8px limegreen); /* Resplandor verde */
            animation: cursorMove 1.5s infinite ease-in-out; /* Animación de movimiento del cursor */
            pointer-events: none; /* Permite que los clics pasen a los elementos debajo */
            transform: translate(-50%, -50%); /* Centra el cursor en su posición */
            z-index: 10; /* Asegura que el cursor esté por encima de los botones */
        }

        /* Animación de movimiento del cursor */
        @keyframes cursorMove {
            0% { transform: translate(-50%, -50%) translateX(0px) translateY(0px); }
            25% { transform: translate(-50%, -50%) translateX(5px) translateY(-5px); }
            50% { transform: translate(-50%, -50%) translateX(0px) translateY(0px); }
            75% { transform: translate(-50%, -50%) translateX(-5px) translateY(5px); }
            100% { transform: translate(-50%, -50%) translateX(0px) translateY(0px); }
        }

        /* Estilos para la caja de mensaje (reemplaza alert()) */
        .message-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #2d3748;
            color: #fef08a;
            padding: 30px;
            border: 4px solid limegreen;
            box-shadow: 0 0 20px limegreen;
            z-index: 1000;
            display: none; /* Oculto por defecto */
            text-align: center;
            font-size: clamp(1rem, 4vw, 1.5rem); /* Tamaño de fuente responsivo */
            border-radius: 12px;
            max-width: 80%;
        }

        .message-box button {
            background-color: limegreen;
            color: #1a202c;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 25px;
            font-size: clamp(0.8rem, 3vw, 1.2rem); /* Tamaño de fuente responsivo */
            font-family: 'Press Start 2P', cursive;
            transition: background-color 0.2s;
        }

        .message-box button:hover {
            background-color: #00cc00; /* Verde más oscuro al pasar el ratón */
        }

        /* Media queries para responsividad (ajustes finos si es necesario, aunque clamp() ya ayuda mucho) */
        @media (max-width: 640px) {
            .game-container {
                padding: 4%; /* Ajuste de padding para pantallas muy pequeñas */
            }
        }
    </style>
</head>
<body>
    <div id="gameContainer" class="game-container">
        <div class="question-text">
            ¿QUIERES REINICIAR EL VIDEO?
        </div>
        <div class="options-container">
            <button id="yesButton" class="option-button">SÍ</button>
            <button id="noButton" class="option-button">NO</button>
            <!-- Cursor pixelado como SVG para mayor control de forma y color -->
            <svg id="pixelCursor" class="pixel-cursor" viewBox="0 0 10 16">
                <!-- Dibujo de un cursor de flecha pixelado simple (optimizado para pixel art) -->
                <path d="M1 1 L1 15 L5 11 L9 15 L9 1 L1 1 Z" fill="limegreen"/>
            </svg>
        </div>
    </div>

    <!-- Caja de mensaje que aparecerá al hacer clic en un botón -->
    <div id="messageBox" class="message-box">
        <p id="messageText"></p>
        <button id="closeMessage">OK</button>
    </div>

    <script>
        // Obtener referencias a los elementos del DOM
        const gameContainer = document.getElementById('gameContainer');
        const yesButton = document.getElementById('yesButton');
        const noButton = document.getElementById('noButton');
        const pixelCursor = document.getElementById('pixelCursor');
        const messageBox = document.getElementById('messageBox');
        const messageText = document.getElementById('messageText');
        const closeMessageButton = document.getElementById('closeMessage');

        // Inicializar un sintetizador simple de Tone.js para el sonido de hover
        const synth = new Tone.Synth().toDestination();
        let audioContextStarted = false; // Bandera para controlar si el contexto de audio ha iniciado
        let canPlayHoverSound = true; // Bandera para controlar la frecuencia del sonido de hover

        // Función para posicionar el cursor sobre el botón "SÍ"
        function positionCursor() {
            const yesRect = yesButton.getBoundingClientRect();
            const containerRect = gameContainer.getBoundingClientRect();

            // Calcular la posición relativa del cursor dentro del contenedor del juego
            // Posicionar el cursor a la izquierda del botón "SÍ", centrado verticalmente
            const cursorLeft = (yesRect.left - containerRect.left) + window.scrollX - pixelCursor.offsetWidth / 2 - 20;
            const cursorTop = (yesRect.top - containerRect.top) + window.scrollY + yesRect.height / 2;

            pixelCursor.style.left = `${cursorLeft}px`;
            pixelCursor.style.top = `${cursorTop}px`;
        }

        // Función para mostrar la caja de mensaje
        function showMessage(message) {
            messageText.textContent = message;
            messageBox.style.display = 'block'; // Mostrar la caja de mensaje
        }

        // Función para iniciar el contexto de audio de Tone.js
        async function startAudioContext() {
            if (!audioContextStarted) {
                await Tone.start();
                console.log('AudioContext started');
                audioContextStarted = true;
            }
        }

        // Event listener para cuando la ventana se carga completamente
        window.onload = () => {
            // Activar la animación de entrada del contenedor principal
            gameContainer.classList.add('animate-in');
            positionCursor(); // Posicionar el cursor al cargar la página
        };

        // Event listener para cuando la ventana cambia de tamaño (para mantener el cursor posicionado)
        window.addEventListener('resize', positionCursor);

        // Event listener para el botón "SÍ"
        yesButton.addEventListener('click', () => {
            startAudioContext(); // Iniciar el contexto de audio al primer clic
            showMessage("¡VIDEO REINICIADO!");
        });

        // Event listener para el botón "NO"
        noButton.addEventListener('click', () => {
            startAudioContext(); // Iniciar el contexto de audio al primer clic
            showMessage("¡OPERACIÓN CANCELADA!");
        });

        // Event listener para cerrar la caja de mensaje
        closeMessageButton.addEventListener('click', () => {
            messageBox.style.display = 'none'; // Ocultar la caja de mensaje
        });

        // --- Nuevos Event Listeners para el sonido al pasar el cursor ---

        // Función para reproducir un sonido corto y retro
        function playHoverSound() {
            // Solo reproduce el sonido si el contexto de audio ha iniciado y no se está reproduciendo ya
            if (audioContextStarted && canPlayHoverSound) {
                canPlayHoverSound = false; // Desactivar la reproducción para evitar spam
                synth.triggerAttackRelease("C5", "8n"); // C5 por una octava nota
                // Restablecer la bandera después de un corto tiempo para permitir futuras reproducciones
                setTimeout(() => {
                    canPlayHoverSound = true;
                }, 100); // Pequeño retardo para evitar llamadas rápidas y el error "Start time must be strictly greater"
            }
        }

        // Añadir event listener para cuando el mouse entra en el botón "SÍ"
        yesButton.addEventListener('mouseenter', playHoverSound);

        // Añadir event listener para cuando el mouse entra en el botón "NO"
        noButton.addEventListener('mouseenter', playHoverSound);

    </script>
</body>
</html>
